{
  "hooks": {
    "SessionStart": [
      {
        "matcher": "startup|resume|clear|compact",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/hooks/session-start.sh"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/hooks/tdd-guard.sh",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/hooks/worktree-guard.sh",
            "timeout": 3
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Review the conversation for two conditions:\n\n1. VERIFICATION: If the agent claimed work is 'complete', 'fixed', 'passing', or 'done', check if verification commands (test, build, lint) were run with actual output shown BEFORE the claim.\n\n2. FINISHING WORKFLOW: If the conversation involved executing a plan (look for 'executing-plans', 'subagent-driven-development', or similar workflow language), check if 'finishing-a-development-branch' skill was used to present the 4 options (merge, PR, keep, discard).\n\nReturn {\"decision\": \"block\", \"reason\": \"Missing verification evidence (super:verification-before-completion)\"} if condition 1 fails.\nReturn {\"decision\": \"block\", \"reason\": \"Plan execution detected but finishing-a-development-branch not used. Use the skill to present merge/PR/keep/discard options.\"} if condition 2 fails.\nReturn {\"decision\": \"approve\"} if all conditions pass or don't apply.",
            "timeout": 30
          }
        ]
      }
    ]
  }
}
